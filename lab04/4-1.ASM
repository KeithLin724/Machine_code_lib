;P1块X北47q陪ボ竟陪ボ憾锭(->Q->κ->d)
;YnㄏL陪ボ,块JT腹0,はぇ块J1

;P0块X北7q陪ボ竟W┮陪ボ氦寒e

;nOW计t着芎C,O@蛹痞rs尿陪ボ20Ω,HR4pt

;R0既s竟xs应旒皮U@Ω赣陪ボ杭痞r,R1sQ旒,R2κ,R3d 

	ORG 0000H
	AJMP MAIN
	ORG 0050H
MAIN:					;w]W计竟9990
	MOV R0,#0			;OR0碍应旒 w]0 
	MOV R1,#9			;OR1挨Q旒 w]9 
	MOV R2,#9			;OR2唉师旒 w]9 
	MOV R3,#9			;OR3挨d旒 w]9 
	MOV R4,#0			;HR4p衡@计`吏Ω计 w]0 
	MOV DPTR,#TABLE		;N0-9Data瘠J{ΑO拘砰 
	
LOOP:
	MOV P1,#11110111B	;北睽uΤ应炜OG 
	MOV A,R0			;N应彀T腹メ倒A 
	MOVC A,@A+DPTR		;N旄m@A+DPTRい涵劝e倒A 
	MOV P0,A			;块XAPort0 -> 7q陪ボ竟
	INC R4				;`吏Ω计[@ 
	ACALL DELAY
	
	MOV P1,#11111011B	;北睽uΤQ炜OG 
	MOV A,R1		    ;NQ彀T腹メ倒A 
	MOVC A,@A+DPTR		;N旄m@A+DPTRい涵劝e倒A 
	MOV P0,A			;块XAPort0 -> 7q陪ボ竟 
	ACALL DELAY
	
	MOV P1,#11111101B	;北睽uΤκ炜OG
	MOV A,R2			;Nκ彀T腹メ倒A 
	MOVC A,@A+DPTR		;N旄m@A+DPTRい涵劝e倒A 
	MOV P0,A			;块XAPort0 -> 7q陪ボ竟 
	ACALL DELAY
	
	MOV P1,#11111110B	;北睽uΤd炜OG
	MOV A,R3			;Nd彀T腹メ倒A 
	MOVC A,@A+DPTR		;N旄m@A+DPTRい涵劝e倒A 
	MOV P0,A			;块XAPort0 -> 7q陪ボ竟
	ACALL DELAY
	
	CJNE R4,#20,LOOP	;P_`吏Ω计O_[20,SΤN铬LOOP~尿W计 
	INC R0				;s尿Ω计F20,应旒匹[@ 
	CJNE R0,#10,LOOP	;P_应旒片O_[10,SΤN铬LOOP~尿W计
	AJMP LOOP1			;はぇ铬LOOP2
	
LOOP1:					;应旒匹[欷Q寒森 
	MOV R0,#0			;N应旒萍圈s竟R0 k0
	INC R1				;Q旒匹[@ 
	CJNE R1,#10,LOOP	;P_Q旒片O_[10,SΤN铬LOOP~尿W计
	AJMP LOOP2			;はぇ铬LOOP2 

LOOP2:					;Q旒匹[欷Q寒森
	MOV R1,#0			;NQ旒萍圈s竟R1 k0 
	INC R2              ;κ旒匹[@ 
	CJNE R2,#10,LOOP	;P_κ旒片O_[10,SΤN铬LOOP~尿W计 
	AJMP LOOP3			;はぇ铬LOOP3  
	
LOOP3:					;κ旒匹[欷Q寒森
	MOV R2,#0			;Nκ旒萍圈s竟R2 k0 
	INC R3				;d旒匹[@ 
	CJNE R3,#10,LOOP	;P_d旒片O_[10,SΤN铬LOOP~尿W计
	AJMP LOOP4			;はぇ铬LOOP4 
	
LOOP4:					;d旒匹[欷Q寒森 
	MOV R3,#0			;Nd旒萍圈s竟R3 k0 
	AJMP LOOP			;铬LOOP
	
DELAY:
	MOV R5,#0FFH
DELAY1:
	MOV R6,#1H
DELAY2:
	MOV R7,#1H
DELAY3:
	DJNZ R7,DELAY3
	DJNZ R6,DELAY2
	DJNZ R5,DELAY1
	RET
	
TABLE:					;计r陪ボ夹乓 
	DB	0C0H			;0
	DB	0F9H			;1
	DB	0A4H			;2
	DB	0B0H			;3
	DB	099H			;4
	DB	092H			;5
	DB	082H			;6
	DB	0F8H			;7
	DB	080H			;8
	DB	090H			;9
	
	END
