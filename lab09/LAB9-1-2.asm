	ORG 00H
	JMP ROW1
	ORG 50H
ROW1:
	MOV P1,#7FH
	CALL DELAY
	MOV A,P1
	ANL A,#0FH
	MOV R1,#1
	CJNE A,#0FH,COL1
ROW2:
	MOV P1,#0BFH
	CALL DELAY
	MOV A,P1
	ANL A,#0FH
	MOV R1,#5
	CJNE A,#0FH,COL1
	JMP ROW1
COL1:
	CJNE A,#0EH,COL2
	MOV R0,#0
	JMP MAIN1
COL2:
	CJNE A,#0DH,COL3
	MOV R0,#1
	JMP MAIN1
COL3:
	CJNE A,#0BH,COL4
	MOV R0,#2
	JMP MAIN1
COL4:
	CJNE A,#07H,ROW1
	MOV R0,#3
MAIN1:
	CALL DELAY1S
	MOV R3,#0
	MOV A,R0
	ADD A,R1
	MOV R2,A
	SUBB A,#5
	JNC MAIN2
	MOV A,#00010001B
	JMP FUN1
MAIN2:
	MOV A,R2
	CLR C
	SUBB A,#4
	MOV R2,A
	MOV A,#00010001B
	JMP FUN2
FUN1:
	MOV P2,A
	CALL DELAY
	INC R3
	RR A
	CJNE R3,#130,FUN1
	MOV R3,#0
	DJNZ R2	,FUN1
	JMP ROW1
FUN2:
	MOV P2,A
	CALL DELAY
	INC R3
	RL A
	CJNE R3,#130,FUN2
	MOV R3,#0
	DJNZ R2,FUN2
	JMP ROW1
DELAY1S:
	MOV R5,#255
DELAY1S1:
	MOV R6,#255
DELAY1S2:
	MOV R7,#10
DELAY1S3:
	DJNZ R7,DELAY1S3
	DJNZ R6,DELAY1S2
	DJNZ R5,DELAY1S1
	RET
DELAY:
	MOV R6,#200
DELAY1:
	MOV R7,#250
DELAY2:
	DJNZ R7,DELAY2
	DJNZ R6,DELAY1
	RET
END