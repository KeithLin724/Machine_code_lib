	ORG	0000H
	AJMP	LED_SHOW
	ORG	0050H
LED_SHOW:
	MOV     P0,#0FFH
	MOV     P1,#0FFH
	MOV     P2,#0FFH
	//JB	P3.2,LED_SHOW		;JUMP IF BELOW，意思是如果P3.2為1，就跳回LED_SHOW。P3.2為傾斜開關，當搖搖棒往左傾時，P3.2會輸出 0，程式往下跑，而當往右傾時，P3.2輸出1，跳回LED_SHOW

	MOV	R0,#0			;R0的值設為0,R0記錄目前所讀取的data位置
	MOV	DPTR,#TABLE			;將TABLE存入DPTR暫存器
	MOV	R1,#24				;R1的值設為24,R1為TABLE所存入的data筆數

	JB	P3.2,LED_SHOW
NEXT_COLUMN:
	CALL READ_BYTE
	MOV P1,A

	CALL	READ_BYTE		;呼叫READ_BYTE副程式，READ_BYTE讀取TABLE的8個bit將A丟入P1,P1控制文字下面三分之一部份
	MOV	P2,A				;將A丟入P2,P2控制文字中間三分之一部份
		
	CALL	READ_BYTE
	MOV	P0,A				;將A丟入P3,P3控制文字上面三分之一部份

	CALL	DELAY			; 呼叫DELAY副程式,這裡DELAY控制顯示一行的時間,若條長DELAY，則字會被放寬
	DJNZ	R1,NEXT_COLUMN	;若R1筆資料全部顯示過一次(R1被減到0)，則跳回LED_SHOW重新執行,如果沒有則繼續回到NEXT_COLUMN 顯示
	AJMP	LED_SHOW	
			 
READ_BYTE:					 
	MOV	A,R0				;將TABLE裡面的第R0筆data存入A
	MOVC	A,@A+DPTR
	CPL	A				;由於搖搖棒需輸出0的訊號才會亮，因此在這將A做反相
	INC	R0				;R0 +1 表是往下一筆資料前進
	RET					 ; RETURN

TABLE:
	DB	00000000B,00000000B,00000000B
	DB	00000000B,00000000B,00000000B
	DB	00000000B,00000000B,00000000B
	DB	00000111B,11111111B,11000000B
	DB	00000111B,11111111B,11000000B
	DB	00000011B,00101100B,11111000B
	DB	00000011B,00101100B,11111100B
	DB	00000011B,00110110B,11001100B
	DB	00000011B,11110111B,11000000B
	DB	00000010B,11110001B,11000000B
	DB	00000000B,00000000B,00000000B
	DB	00000000B,11111111B,00000000B
	DB	00000000B,01111111B,00000000B
	DB	00000000B,00000011B,00000000B
	DB	11111111B,11111111B,11111110B
	DB	11111111B,11111111B,11111110B
	DB	00000111B,11111111B,11111110B
	DB	00000000B,01000001B,10000000B
	DB	00000000B,11000001B,10000000B
	DB	00000001B,11111111B,10000000B
	DB	00000000B,01111111B,10000000B
	DB	00000000B,00000000B,00000000B
	DB	00000000B,00000000B,00000000B
	DB	00000000B,00000000B,00000000B

DELAY:
	MOV	R6,#80H
DELAY1:
	MOV	R7,#60H
DELAY2:
	DJNZ	R7,DELAY2
	DJNZ	R6,DELAY1

	RET
	END
