	ORG	00H
	JMP	INITIAL
	ORG	03H
	JMP	INTERRUPT
INITIAL:
	SETB	IT0		     ;IT0=1 Falling edge triggered 
	MOV	IE,#10000001B	 ;第7bit為Enable all interrupts，第0bit為ITN0(P3.2傾斜開關)
	MOV	R4,#0
	MOV	DPTR,#TABLE0
WAIT:
	JMP	WAIT
INTERRUPT:				   
	CJNE	R4,#1,J1
	MOV	DPTR,#TABLE1
	INC	R4
	JMP	LOOP
J1:
	CJNE	R4,#5,J2
	MOV	DPTR,#TABLE2
	INC	R4
	JMP	LOOP
J2:
	CJNE	R4,#9,J3
	MOV	DPTR,#TABLE3
	INC	R4
	JMP	LOOP
J3:
	CJNE	R4,#13,J4
	MOV	DPTR,#TABLE4
	INC	R4
	JMP	LOOP
J4:
	CJNE	R4,#17,J5
	MOV	DPTR,#TABLE5
	INC	R4
	JMP	LOOP
J5:
	CJNE	R4,#21,BACK
	MOV	DPTR,#TABLE6
	INC	R4
	JMP	LOOP
BACK:
	CJNE	R4,#25,FIRST
	MOV	DPTR,#TABLE0
	MOV	R4,#0
	JMP	LOOP
FIRST:
	INC	R4
LOOP:				        
	MOV	R0,#0
	MOV	R1,#24
NEXT_COLUMN:
	CALL	READ_BYTE		
	MOV	P1,A
	CALL	READ_BYTE
	MOV	P2,A
	CALL	READ_BYTE
	MOV	P0,A
	CALL	DELAY
	DJNZ	R1,NEXT_COLUMN
	RETI

READ_BYTE:
	MOV	A,R0			
	MOVC	A,@A+DPTR
	CPL	A
	INC	R0
	RET
DELAY:
	MOV	R6,#80
DELAY1:
	MOV	R7,#70
DELAY2:
	DJNZ	R7,DELAY2
	DJNZ	R6,DELAY1
	RET

TABLE0:
        DB      0000000B,00000000B,00000000B
        DB      0000001B,11111111B,11100000B
        DB      0000111B,11111111B,11111000B
        DB      0001111B,11111111B,11111100B
        DB      0001111B,00000000B,00111100B
        DB      0011000B,00000000B,00001100B
        DB      0001100B,00000000B,00001100B
        DB      0001111B,10000000B,01111100B
        DB      0001111B,11111111B,11111100B
        DB      0000111B,11111111B,11111000B
        DB      0000000B,11111111B,11000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B

TABLE1:
        DB      0000000B,00000000B,00000000B
        DB      0000001B,11111111B,11100000B
        DB      0000111B,11111111B,11111000B
        DB      0001111B,11111111B,11111100B
        DB      0001111B,00000110B,00111100B
        DB      0001100B,00000010B,00001100B
        DB      0011000B,00000011B,00000100B
        DB      0001110B,00000110B,01111100B
        DB      0001111B,11111110B,01111100B
        DB      0000111B,11111110B,01111000B
        DB      0000011B,11111000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B



TABLE2:
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0001000B,00000000B,00011000B
        DB      0001000B,00000000B,00011000B
        DB      0001111B,11111111B,11111000B
        DB      0001111B,11111111B,11111100B
        DB      0001111B,11111111B,11111100B
        DB      0001000B,00000000B,00000000B
        DB      0001000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B

TABLE3:

        DB      0000000B,00000000B,00000000B
        DB      0000001B,11111111B,11100000B
        DB      0000111B,11111111B,11111000B
        DB      0001111B,11111111B,11111100B
        DB      0001111B,00000000B,00111100B
        DB      0011000B,00000000B,00001100B
        DB      0001100B,00000000B,00001100B
        DB      0001111B,10000000B,01111100B
        DB      0001111B,11111111B,11111100B
        DB      0000111B,11111111B,11111000B
        DB      0000000B,11111111B,11000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B

TABLE4:
        DB      0000000B,10000000B,00000000B
        DB      0000011B,11110000B,11110000B
        DB      0000111B,11111011B,11111000B
        DB      0001111B,11111111B,11111100B
        DB      0001100B,00011111B,10001100B
        DB      0011000B,00001111B,00000100B
        DB      0011000B,00011110B,00001100B
        DB      0001100B,00111111B,10011100B
        DB      0001111B,11111011B,11111100B
        DB      0001111B,11110011B,11111000B
        DB      0000011B,11100000B,11110000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B

TABLE5:
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,01111100B
        DB      0000000B,00000000B,01111100B
        DB      0000000B,00000000B,00011100B
        DB      0000111B,00000000B,00001100B
        DB      0001111B,11111000B,00001100B
        DB      0001111B,11111110B,00001100B
        DB      0001111B,11111111B,11001100B
        DB      0000000B,00000011B,11101100B
        DB      0000000B,00000000B,01111100B
        DB      0000000B,00000000B,00111100B
        DB      0000000B,00000000B,00001100B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B

TABLE6:
        DB      0000000B,00000000B,00000000B
        DB      0001110B,00000001B,11110000B
        DB      0001111B,10000001B,11111000B
        DB      0001111B,11000001B,11011100B
        DB      0001100B,11110000B,10001100B
        DB      0001100B,01111000B,00000100B
        DB      0001100B,00111100B,00001100B
        DB      0001100B,00011111B,00001100B
        DB      0001100B,00001111B,11111100B
        DB      0001111B,10000011B,11111000B
        DB      0001111B,10000001B,11110000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
        DB      0000000B,00000000B,00000000B
END